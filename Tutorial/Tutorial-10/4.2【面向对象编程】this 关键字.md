###  4.2 this 关键字
[教程地址： 4.2 this 关键字](http://javascript.ruanyifeng.com/oop/this.html)

---
### 目录
```
1. 涵义
2. 使用场合
3. 使用注意点
4. 绑定 this 的方法
   4.1 function.prototype.call()
   4.2 function.prototype.apply()
   4.3 function.prototype.bind()
5. 参考链接
```

---
### 1. 涵义
- `this`关键字是一个非常重要的语法点。毫不夸张地说，不理解它的含义，大部分开发任务都无法完成
- 首先，`this`总是返回一个对象
- 随着方法所在的对象不同，`this`的指向也不同
- 总结一下，JavaScript语言之中，一切皆对象，运行环境也是对象，所以函数都是在某个对象之中运行，`this`就是这个对象（环境）
- 这本来并不会让用户糊涂，但是JavaScript支持运行环境动态切换，也就是说，`this`的指向是动态的，没有办法事先确定到底指向哪个对象，这才是最让初学者感到困惑的地方
- 如果一个函数在全局环境中运行，那么`this`就是指顶层对象（浏览器中为`window`对象）
- 可以近似地认为，`this`是所有函数运行时的一个隐藏参数，指向函数的运行环境

---
### 2. 使用场合
- `this`的使用可以分成以下几个场合
- **全局环境**
   - 在全局环境使用`this`，它指的就是顶层对象`window`
- **构造函数**
   - 构造函数中的`this`，指的是实例对象
- **对象的方法**
  - 当A对象的方法被赋予B对象，该方法中的`this`就从指向A对象变成了指向B对象
  - 所以要特别小心，将某个对象的方法赋值给另一个对象，会改变`this`的指向
- **Node**
  - 在Node中，`this`的指向又分成两种情况。全局环境中，`this`指向全局对象`global`；模块环境中，`this`指向module.exports
  
---
### 3. 使用注意点
- **避免多层this**
- 由于`this`的指向是不确定的，所以切勿在函数中包含多层的`this`
- **避免数组处理方法中的this**
- 数组的`map`和`foreach`方法，允许提供一个函数作为参数。这个函数内部不应该使用`this`
- **避免回调函数中的this**
- 回调函数中的`this`往往会改变指向，最好避免使用

---
### 4. 绑定 this 的方法
- `this`的动态切换，固然为JavaScript创造了巨大的灵活性，但也使得编程变得困难和模糊
- 有时，需要把`this`固定下来，避免出现意想不到的情况。JavaScript提供了`call`、`apply`、`bind`这三个方法，来切换/固定`this`的指向

#### 4.1 function.prototype.call()
- 函数实例的`call`方法，可以指定函数内部`this`的指向（即函数执行时所在的作用域），然后在所指定的作用域中，调用该函数
- `call`方法的参数，应该是一个对象。如果参数为空、`null`和`undefined`，则默认传入全局对象
- 如果`call`方法的参数是一个原始值，那么这个原始值会自动转成对应的包装对象，然后传入`call`方法
- `call`的第一个参数就是`this`所要指向的那个对象，后面的参数则是函数调用时所需的参数
- `call`方法的一个应用是调用对象的原生方法

#### 4.2 function.prototype.apply()
- `apply`方法的作用与`call`方法类似，也是改变`this`指向，然后再调用该函数。唯一的区别就是，它接收一个数组作为函数执行时的参数

#### 4.3 function.prototype.bind()
- `bind`方法用于将函数体内的`this`绑定到某个对象，然后返回一个新函数
- `bind`方法有一些使用注意点
   - `bind`方法每运行一次，就返回一个新函数，这会产生一些问题
   - 回调函数是JavaScript最常用的模式之一，但是一个常见的错误是，将包含`this`的方法直接当作回调函数
