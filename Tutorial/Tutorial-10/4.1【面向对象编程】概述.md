### 4.1 概述
[教程地址： 4.1 概述](http://javascript.ruanyifeng.com/oop/basic.html)

---
### 目录
```
1. 对象的概念
2. 构造函数
3. new 命令
   3.1 基本用法
   3.2 new命令的原理
```

---
### 1. 对象的概念
- 面向对象编程的核心思想是将真实世界中各种复杂的关系，抽象为一个个对象，然后由对象之间的分工与合作，完成对真实世界的模拟
- 每一个对象都是功能中心，具有明确分工，可以完成接受信息、处理数据、发出信息等任务。因此，面向对象编程具有灵活性、代码的可重用性、模块性等特点，容易维护和开发，非常适合多人合作的大型软件项目
- “对象”是单个实物的抽象:一本书、一辆汽车、一个人都可以是“对象”，一个数据库、一张网页、一个与远程服务器的连接也可以是“对象”。当实物被抽象成“对象”，实物之间的关系就变成了“对象”之间的关系，从而就可以模拟现实情况，针对“对象”进行编程
- “对象”是一个容器，封装了“属性”（property）和“方法”（method）:所谓“属性”，就是对象的状态；所谓“方法”，就是对象的行为（完成某种任务）

---
### 2. 构造函数
- “面向对象编程”的第一步，就是要生成“对象”
- “对象”是单个实物的抽象。通常需要一个模板，表示某一类实物的共同特征，然后“对象”根据这个模板生成
- JavaScript语言的对象体系，不是基于“类”的，而是基于构造函数（constructor）和原型链（prototype）
- JavaScript语言使用构造函数（constructor）作为对象的模板。
- 所谓“构造函数”，就是专门用来生成“对象”的函数。它提供模板，描述对象的基本结构。一个构造函数，可以生成多个对象，这些对象都有相同的结构
- 构造函数名字的第一个字母通常大写
- 构造函数的特点有两个
   *   函数体内部使用了`this`关键字，代表了所要生成的对象实例。
   *   生成对象的时候，必需用`new`命令，调用`Vehicle`函数。

---
### 3. new 命令

#### 3.1 基本用法
- `new`命令的作用，就是执行构造函数，返回一个实例对象
- 使用`new`命令时，根据需要，构造函数也可以接受参数
- `new`命令本身就可以执行构造函数，所以后面的构造函数可以带括号，也可以不带括号
- 为了保证构造函数必须与`new`命令一起使用，一个解决办法是，在构造函数内部使用严格模式，即第一行加上`use strict`
- 另一个解决办法，是在构造函数内部判断是否使用`new`命令，如果发现没有使用，则直接返回一个实例对象

```
function Fubar(foo, bar){
  if (!(this instanceof Fubar)) {
    return new Fubar(foo, bar);
  }

  this._foo = foo;
  this._bar = bar;
}

Fubar(1, 2)._foo // 1
(new Fubar(1, 2))._foo // 1
```

#### 3.2 new命令的原理
- 使用`new`命令时，它后面的函数调用就不是正常的调用，而是依次执行下面的步骤

1.  创建一个空对象，作为将要返回的对象实例
2.  将这个空对象的原型，指向构造函数的`prototype`属性
3.  将这个空对象赋值给函数内部的`this`关键字
4.  开始执行构造函数内部的代码

- 如果构造函数内部有`return`语句，而且`return`后面跟着一个对象，`new`命令会返回`return`语句指定的对象；否则，就会不管`return`语句，返回`this`对象
- 但是，如果`return`语句返回的是一个跟`this`无关的新对象，`new`命令会返回这个新对象，而不是`this`对象。这一点需要特别引起注意
- 另一方面，如果对普通函数（内部没有`this`关键字的函数）使用`new`命令，则会返回一个空对象
